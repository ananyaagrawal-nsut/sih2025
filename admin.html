<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smartclass Pro - Admin</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM for UI rendering -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .animated-gradient { background: linear-gradient(-45deg, var(--bg-start), var(--bg-mid), var(--bg-start), var(--bg-end)); background-size: 400% 400%; animation: gradient-animation 15s ease infinite; }
        :root { --bg-start: #020617; --bg-mid: #083344; --bg-end: #0c4a6e; --primary-glow: #22d3ee; --primary-start: #06b6d4; --primary-end: #38bdf8; --border-color: rgba(34, 211, 238, 0.2); --text-primary: #22d3ee; --text-accent: #67e8f9; }
        .line-chart-path { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: dash 2s ease-in-out forwards; }
        @keyframes dash { to { stroke-dashoffset: 0; } }
    </style>
</head>
<body>
    <script>
        // Auth guard
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userRole = localStorage.getItem('userRole');
        if (!isLoggedIn || userRole !== 'admin') {
            // âœ… FIX: Construct a full URL for redirection
            const currentUrl = window.location.href;
            const loginUrl = new URL('index.html', currentUrl).href;
            window.location.href = loginUrl;
        }
    </script>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        const timetables = { "Mechanical(Electric Vehicles)": [ { id: 1, course: "Advanced Mathematics", faculty: "Prof. Rachana Shokhanda", room: "303", students: 58, day: 0, time: 2 }, { id: 2, course: "Manufacturing Process", faculty: "Prof. Khanna", room: "303", students: 58, day: 0, time: 4 }, { id: 4, course: "Thermal Engineering-2", faculty: "Dr.Naveen Sharma", room: "305", students: 58, day: 3, time: 3 }, { id: 5, course: "Strength of material ", faculty: "Prof.Manish", room: "C302", students: 45, day: 1, time: 1 }, { id: 6, course: "Electrical Engineering", faculty: "Prof. Ibrahim", room: "E101", students: 52, day: 4, time: 0 }, ], "Computer Science": [ { id: 3, course: "Intro to Algorithms", faculty: "Dr. Wilson", room: "C301", students: 50, day: 2, time: 3 }, { id: 9, course: "Data Structures", faculty: "Dr. Ada Lovelace", room: "CS101", students: 60, day: 0, time: 1 }, { id: 10, course: "Operating Systems", faculty: "Dr. Linus Torvalds", room: "CS102", students: 55, day: 1, time: 3 }, { id: 11, course: "Database Management", faculty: "Dr. Codd", room: "CS201", students: 48, day: 3, time: 0 }, { id: 12, course: "Machine Learning", faculty: "Dr. Hinton", room: "AI-Lab", students: 40, day: 4, time: 2 }, ], "Civil": [ { id: 8, course: "Building Materials", faculty: "Dr.Naveen Sharma", room: "CVL1", students: 60, day: 3, time: 1 }, { id: 13, course: "Structural Analysis", faculty: "Prof. Eiffel", room: "CVL2", students: 55, day: 0, time: 0 }, { id: 14, course: "Fluid Mechanics", faculty: "Prof. Bernoulli", room: "CVL-Lab", students: 50, day: 2, time: 1 }, { id: 15, course: "Transportation Engg.", faculty: "Prof. Lutyens", room: "CVL3", students: 62, day: 4, time: 4 }, ], "Electronics and Communication": [ { id: 16, course: "Digital Circuits", faculty: "Prof. Boole", room: "EC101", students: 50, day: 1, time: 0 }, { id: 17, course: "Analog Communication", faculty: "Prof. Marconi", room: "EC102", students: 45, day: 2, time: 2 }, { id: 18, course: "Signals and Systems", faculty: "Prof. Fourier", room: "EC201", students: 55, day: 3, time: 4 }, { id: 19, course: "VLSI Design", faculty: "Prof. Mead", room: "EC-Lab", students: 40, day: 4, time: 1 }, ], "Information Technology": [ { id: 20, course: "Web Development", faculty: "Prof. Berners-Lee", room: "IT101", students: 65, day: 0, time: 3 }, { id: 21, course: "Network Security", faculty: "Prof. Rivest", room: "IT102", students: 58, day: 1, time: 2 }, { id: 22, course: "Cloud Computing", faculty: "Prof. Bezos", room: "IT201", students: 50, day: 2, time: 4 }, { id: 23, course: "Software Engineering", faculty: "Prof. Royce", room: "IT-Lab", students: 60, day: 4, time: 3 }, ] };
        const allDepartments = Object.keys(timetables);
        const timeSlots = ["8:00 AM", "9:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"];
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        const classroomsData = [ { id: 1, name: "Room 301", capacity: 60, type: "Lecture Hall", status: "Available" }, { id: 2, name: "Room 302", capacity: 45, type: "Classroom", status: "Occupied" }, { id: 3, name: "CS101 (Lab)", capacity: 40, type: "Computer Lab", status: "Available" }, { id: 4, name: "Auditorium", capacity: 250, type: "Hall", status: "Maintenance" }, { id: 5, name: "CVL1", capacity: 60, type: "Lecture Hall", status: "Occupied" }, { id: 6, name: "EC-Lab", capacity: 35, type: "Electronics Lab", status: "Available" }, ];
        const facultyData = [ { id: 1, name: "Prof. Rachana Shokhanda", department: "Mechanical(Electric Vehicles)", courses: 2, status: "Active" }, { id: 2, name: "Dr. Wilson", department: "Computer Science", courses: 3, status: "Active" }, { id: 3, name: "Prof. Eiffel", department: "Civil", courses: 2, status: "On Leave" }, { id: 4, name: "Prof. Marconi", department: "Electronics and Communication", courses: 3, status: "Active" }, { id: 5, name: "Prof. Berners-Lee", department: "Information Technology", courses: 2, status: "Active" }, { id: 6, name: "Dr.Naveen Sharma", department: "Mechanical(Electric Vehicles)", courses: 3, status: "Active" }, ];
        const attendanceData = [ { id: 1, course: "Advanced Mathematics", faculty: "Prof. Rachana Shokhanda", department: "Mechanical(Electric Vehicles)", present: 52, total: 58 }, { id: 2, course: "Data Structures", faculty: "Dr. Ada Lovelace", department: "Computer Science", present: 58, total: 60 }, { id: 3, course: "Structural Analysis", faculty: "Prof. Eiffel", department: "Civil", present: 45, total: 55 }, { id: 4, course: "Digital Circuits", faculty: "Prof. Boole", department: "Electronics and Communication", present: 38, total: 50 }, { id: 5, course: "Web Development", faculty: "Prof. Berners-Lee", department: "Information Technology", present: 65, total: 65 }, { id: 6, course: "Operating Systems", faculty: "Dr. Linus Torvalds", department: "Computer Science", present: 48, total: 55 }, ];

        const Card = ({ className, children }) => <div className={`rounded-xl border bg-card text-card-foreground shadow ${className}`}>{children}</div>;
        const Button = ({ className, children, ...props }) => <button className={`inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-glow)]/50 disabled:pointer-events-none disabled:opacity-50 px-4 py-2 ${className}`} {...props}>{children}</button>;
        const Input = ({ className, ...props }) => <input className={`flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-glow)]/50 disabled:cursor-not-allowed disabled:opacity-50 ${className}`} {...props} />;
        const Badge = ({className, children}) => <div className={`inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${className}`}>{children}</div>;
        const DropdownMenu = ({ children }) => <div className="relative inline-block text-left">{children}</div>;
        const DropdownMenuTrigger = ({ children }) => <div>{children}</div>;
        const DropdownMenuContent = ({ children, className }) => <div className={`z-50 origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-slate-900/80 backdrop-blur-xl border-[var(--border-color)] ring-1 ring-black ring-opacity-5 focus:outline-none ${className}`}>{children}</div>;
        const DropdownMenuItem = ({ children, onClick, className }) => <a href="#" onClick={(e) => { e.preventDefault(); onClick(); }} className={`block px-4 py-2 text-sm text-gray-200 hover:bg-[var(--primary-glow)]/10 hover:text-[var(--text-accent)] ${className}`}>{children}</a>;
        const Icon = ({ children, className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const Calendar = ({ className }) => <Icon className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></Icon>;
        const Users = ({ className }) => <Icon className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></Icon>;
        const BookOpen = ({ className }) => <Icon className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></Icon>;
        const BarChart3 = ({ className }) => <Icon className={className}><path d="M3 3v18h18" /><path d="M18 17V9" /><path d="M13 17V5" /><path d="M8 17v-3" /></Icon>;
        const Settings = ({ className }) => <Icon className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" /><circle cx="12" cy="12" r="3" /></Icon>;
        const Search = ({ className }) => <Icon className={className}><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></Icon>;
        const Filter = ({ className }) => <Icon className={className}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" /></Icon>;
        const Download = ({ className }) => <Icon className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" x2="12" y1="15" y2="3" /></Icon>;
        const Sparkles = ({ className }) => <Icon className={className}><path d="m12 3-1.9 5.8-5.8 1.9 5.8 1.9L12 21l1.9-5.8 5.8-1.9-5.8-1.9L12 3z" /><path d="M5 3v4" /><path d="M19 17v4" /><path d="M3 5h4" /><path d="M17 19h4" /></Icon>;
        const ChevronDown = ({ className }) => <Icon className={className}><path d="m6 9 6 6 6-6" /></Icon>;
        const User = ({ className }) => <Icon className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></Icon>;
        const Bell = ({ className }) => <Icon className={className}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></Icon>;
        const PlusCircle = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10" /><line x1="12" x2="12" y1="8" y2="16" /><line x1="8" x2="16" y1="12" y2="12" /></Icon>;
        const UserPlus = ({ className }) => <Icon className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></Icon>;
        const Send = ({ className }) => <Icon className={className}><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></Icon>;
        const FileText = ({ className }) => <Icon className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></Icon>;
        const Server = ({ className }) => <Icon className={className}><rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></Icon>;
        const Database = ({ className }) => <Icon className={className}><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5V19A9 3 0 0 0 21 19V5"/><path d="M3 12A9 3 0 0 0 12 15A9 3 0 0 0 21 12"/></Icon>;
        const Activity = ({ className }) => <Icon className={className}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></Icon>;
        const AlertTriangle = ({ className }) => <Icon className={className}><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></Icon>;
        const Clock = () => { const [time, setTime] = useState(new Date()); useEffect(() => { const timerId = setInterval(() => setTime(new Date()), 1000); return () => clearInterval(timerId); }, []); return <div className="text-lg font-medium text-gray-300 backdrop-blur-sm bg-slate-900/50 px-4 py-1 rounded-lg border border-[var(--border-color)]">{time.toLocaleTimeString()}</div>; };
        const CircularProgress = ({ percentage, color, label }) => { const radius = 52; const stroke = 12; const normalizedRadius = radius - stroke / 2; const circumference = normalizedRadius * 2 * Math.PI; const [offset, setOffset] = useState(circumference); useEffect(() => { const progressOffset = circumference - (percentage / 100) * circumference; setTimeout(() => setOffset(progressOffset), 100); }, [percentage, circumference]); return ( <div className="flex flex-col items-center justify-center"> <div className="relative flex items-center justify-center w-36 h-36"> <svg height="140" width="140" viewBox="0 0 140 140" className="absolute"> <defs><filter id="glow"><feGaussianBlur stdDeviation="3.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs> <circle stroke="#ffffff1a" fill="transparent" strokeWidth={stroke} r={normalizedRadius} cx="70" cy="70" /> <circle stroke={color} fill="transparent" strokeWidth={stroke} strokeDasharray={circumference + ' ' + circumference} style={{ strokeDashoffset: offset, filter: "url(#glow)" }} strokeLinecap="round" r={normalizedRadius} cx="70" cy="70" transform="rotate(-90 70 70)" className="transition-all duration-1000 ease-in-out"/> </svg> <span className="absolute text-3xl font-bold text-white drop-shadow-lg">{percentage}%</span> </div> <span className="mt-3 text-lg font-semibold text-white">{label}</span> </div> ); };
        const DashboardView = ({ setActiveSection }) => { const quickActions = [ { label: "New Timetable", icon: PlusCircle, color: "text-[var(--text-primary)]" }, { label: "Add Faculty", icon: UserPlus, color: "text-sky-400" }, { label: "Broadcast Msg", icon: Send, color: "text-green-400" }, { label: "Generate Report", icon: FileText, color: "text-amber-400" }, ]; const systemStatus = [ { label: "Timetable Engine", status: "Optimal", icon: Settings, color: "text-green-400" }, { label: "Server Status", status: "Online", icon: Server, color: "text-green-400" }, { label: "Attendance Sync", status: "Real-time", icon: Activity, color: "text-green-400" }, { label: "Database", status: "Connected", icon: Database, color: "text-green-400" }, ]; const collegeStats = [ { label: "Overall Attendance", percentage: 92, color: "var(--primary-glow)" }, { label: "Classroom Occupancy", percentage: 78, color: "#38bdf8" }, ]; const upcomingEvents = [ { date: "SEP 25", event: "Mid-Term Exams Begin" }, { date: "OCT 02", event: "National Holiday" }, { date: "OCT 10", event: "Project Submissions Due" }, ]; return ( <div className="p-6 space-y-6"> <div className="grid grid-cols-1 lg:grid-cols-3 gap-6"> <Card className="lg:col-span-2 bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6 hover:border-[var(--primary-glow)]/40 transition-all duration-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.1)]"> <h3 className="text-xl font-bold text-white mb-4">Quick Actions</h3> <div className="grid grid-cols-2 md:grid-cols-4 gap-4"> {quickActions.map(action => ( <button key={action.label} className="flex flex-col items-center justify-center p-4 bg-slate-800/80 rounded-lg border border-slate-700/80 hover:bg-slate-700/70 hover:border-[var(--primary-glow)]/50 transition-all duration-300 transform hover:-translate-y-1"> <action.icon className={`w-8 h-8 ${action.color} mb-2`} /> <span className="text-sm font-semibold text-gray-200 text-center">{action.label}</span> </button> ))} </div> </Card> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6 hover:border-[var(--primary-glow)]/40 transition-all duration-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.1)]"> <h3 className="text-xl font-bold text-white mb-4">System Status</h3> <div className="space-y-3"> {systemStatus.map(sys => ( <div key={sys.label} className="flex items-center justify-between text-sm"> <div className="flex items-center gap-2 text-gray-300"> <sys.icon className="w-4 h-4" /> <span>{sys.label}</span> </div> <div className="flex items-center gap-2 font-semibold"> <div className={`w-2 h-2 rounded-full animate-pulse ${sys.color.replace('text-', 'bg-')}`}></div> <span className={sys.color}>{sys.status}</span> </div> </div> ))} </div> </Card> </div> <div className="grid grid-cols-1 lg:grid-cols-3 gap-6"> <div className="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6"> {collegeStats.map(stat => ( <Card key={stat.label} className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6 flex flex-col items-center justify-center hover:border-[var(--primary-glow)]/40 transition-all duration-300 hover:shadow-lg hover:shadow-[var(--primary-glow)]/10"> <CircularProgress percentage={stat.percentage} color={stat.color} label={stat.label}/> </Card> ))} </div> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6 hover:border-[var(--primary-glow)]/40 transition-all duration-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.1)]"> <h3 className="text-xl font-bold text-white mb-4">Upcoming Events</h3> <div className="space-y-4"> {upcomingEvents.map(item => ( <div key={item.event} className="flex items-center gap-4"> <div className="flex flex-col items-center justify-center w-16 h-16 bg-slate-800/80 rounded-lg border border-slate-700 flex-shrink-0"> <span className="text-xs font-bold text-[var(--text-primary)]">{item.date.split(' ')[0]}</span> <span className="text-xl font-bold text-white">{item.date.split(' ')[1]}</span> </div> <p className="text-gray-200 text-sm font-medium">{item.event}</p> </div> ))} </div> </Card> </div> </div> ); };
        const TimetableGrid = ({ classes }) => ( <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6"> <div className="overflow-x-auto"> <div style={{minWidth: "1100px"}}> <div className="grid grid-cols-8 gap-2 mb-4"> <div className="p-3 text-center font-semibold text-gray-400">Time</div> {days.map((day) => (<div key={day} className="p-3 text-center font-semibold text-white bg-slate-800/80 border border-slate-700/80 rounded-lg">{day}</div>))} </div> <div className="space-y-2"> {timeSlots.map((time, timeIndex) => ( <div key={time} className="grid grid-cols-8 gap-2"> <div className="p-3 text-center text-sm text-gray-300 bg-slate-900/50 rounded-lg border border-slate-700/60 flex items-center justify-center">{time}</div> {days.map((day, dayIndex) => { const classItem = classes.find((c) => c.day === dayIndex && c.time === timeIndex); return ( <div key={`${day}-${time}`} className={`p-2 min-h-[80px] rounded-lg border transition-all duration-200 cursor-pointer ${classItem ? `bg-[var(--primary-glow)]/10 border-[var(--primary-glow)]/30 hover:shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:border-[var(--primary-glow)]/60 backdrop-blur-sm` : "border-slate-700/80 hover:bg-slate-800/50 hover:border-slate-600"}`}> {classItem && ( <div className="text-xs space-y-1"> <div className="font-semibold text-white text-balance">{classItem.course}</div> <div className="text-gray-300 truncate">{classItem.faculty}</div> <div className="flex items-center justify-between text-gray-400"> <span className="truncate">{classItem.room}</span> <span className="flex items-center gap-1 flex-shrink-0"><Users className="w-3 h-3" />{classItem.students}</span> </div> </div> )} </div> ); })} </div> ))} </div> </div> </div> </Card> );
        const ClassroomsView = () => { const getStatusBadge = (status) => { switch (status) { case "Available": return "bg-green-500/10 text-green-400 border-green-500/30"; case "Occupied": return "bg-red-500/10 text-red-400 border-red-500/30"; case "Maintenance": return "bg-amber-500/10 text-amber-400 border-amber-500/30"; default: return "bg-gray-500/10 text-gray-400 border-gray-500/30"; } }; return ( <div className="p-6"> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6"> <h3 className="text-xl font-bold text-white mb-4">Classroom Status</h3> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> {classroomsData.map(room => ( <Card key={room.id} className="bg-slate-800/50 border-slate-700/80 p-4 transition-transform transform hover:-translate-y-1 hover:shadow-lg hover:shadow-[var(--primary-glow)]/10"> <div className="flex justify-between items-start"> <div> <h4 className="font-bold text-lg text-white">{room.name}</h4> <p className="text-sm text-gray-400">{room.type}</p> </div> <Badge className={getStatusBadge(room.status)}>{room.status}</Badge> </div> <div className="mt-4 text-sm text-gray-300">Capacity: {room.capacity} Students</div> </Card> ))} </div> </Card> </div> ) };
        const FacultyView = () => { const [departmentFilter, setDepartmentFilter] = useState("All Departments"); const filteredFaculty = facultyData.filter(f => departmentFilter === "All Departments" || f.department === departmentFilter); return( <div className="p-6 space-y-6"> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6"> <div className="flex justify-between items-center mb-4"> <h3 className="text-xl font-bold text-white">Faculty Directory</h3> <select onChange={(e) => setDepartmentFilter(e.target.value)} className="bg-slate-800/80 border border-slate-700 rounded-md px-3 py-1 text-gray-200 focus:ring-2 focus:ring-[var(--primary-glow)] focus:outline-none"> <option>All Departments</option> {allDepartments.map(dept => <option key={dept}>{dept}</option>)} </select> </div> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> {filteredFaculty.map(faculty => ( <Card key={faculty.id} className="bg-slate-800/50 border-slate-700/80 p-4 text-center transition-shadow hover:shadow-xl hover:shadow-[var(--primary-glow)]/10"> <img src={`https://placehold.co/100x100/083344/22d3ee?text=${faculty.name.charAt(0)}`} alt={faculty.name} className="w-24 h-24 rounded-full mx-auto mb-4 border-2 border-[var(--primary-glow)]/30"/> <h4 className="text-lg font-bold text-white">{faculty.name}</h4> <p className="text-[var(--text-primary)] text-sm">{faculty.department}</p> <p className="text-gray-400 text-sm mt-2">{faculty.courses} Courses Assigned</p> <Badge className={`mt-4 ${faculty.status === 'Active' ? 'bg-green-500/10 text-green-400 border-green-500/30' : 'bg-amber-500/10 text-amber-400 border-amber-500/30'}`}>{faculty.status}</Badge> </Card> ))} </div> </Card> </div> ); };
        const AnalyticsView = () => { const [tooltip, setTooltip] = useState({ show: false, x: 0, y: 0, content: '' }); const kpiData = [ { title: "Student Enrollment", value: "3,450", icon: Users }, { title: "Avg. Attendance", value: "92.1%", icon: Activity }, { title: "Courses Offered", value: "128", icon: BookOpen }, { title: "Classroom Utilization", value: "78%", icon: Server }, ]; const facultyWorkload = facultyData.map(f => ({ label: f.name.split(' ').pop(), value: f.courses })); const attendanceTrend = [ {day: 'Mon', val: 93}, {day: 'Tue', val: 91}, {day: 'Wed', val: 95}, {day: 'Thu', val: 89}, {day: 'Fri', val: 92}, {day: 'Sat', val: 94} ]; const ChartCard = ({ title, children }) => ( <Card className="bg-slate-800/50 border-slate-700/80 p-6 h-full"> <h4 className="font-semibold text-white mb-4">{title}</h4> {children} </Card> ); const LineChart = ({ data }) => { const width = 500; const height = 200; const padding = { top: 20, right: 20, bottom: 30, left: 40 }; const minY = 85; const maxY = 100; const xScale = (index) => padding.left + (index / (data.length - 1)) * (width - padding.left - padding.right); const yScale = (value) => height - padding.bottom - ((value - minY) / (maxY - minY)) * (height - padding.top - padding.bottom); const pathData = data.map((point, i) => `${i === 0 ? 'M' : 'L'} ${xScale(i)} ${yScale(point.val)}`).join(' '); const handleMouseOver = (e, point) => { setTooltip({show: true, x: e.clientX, y: e.clientY, content: `${point.day}: ${point.val}%`}); }; const handleMouseOut = () => { setTooltip({ show: false, x: 0, y: 0, content: '' }); }; return ( <div className="relative"> <svg viewBox={`0 0 ${width} ${height}`}> <defs> <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%"> <stop offset="0%" stopColor="var(--primary-start)" /> <stop offset="100%" stopColor="var(--primary-end)" /> </linearGradient> <filter id="pointGlow"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter> </defs> {/* Y-Axis Grid Lines & Labels */} {[100, 95, 90, 85].map(y => ( <g key={y}> <line x1={padding.left} y1={yScale(y)} x2={width - padding.right} y2={yScale(y)} stroke="var(--border-color)" strokeDasharray="4"/> <text x={padding.left - 10} y={yScale(y) + 4} fill="#9ca3af" textAnchor="end" fontSize="12">{y}%</text> </g> ))} {/* X-Axis Labels */} {data.map((point, i) => ( <text key={point.day} x={xScale(i)} y={height - 10} fill="#9ca3af" textAnchor="middle" fontSize="12">{point.day}</text> ))} <path d={pathData} fill="none" stroke="url(#lineGradient)" strokeWidth="3" className="line-chart-path" /> {data.map((point, i) => ( <circle key={i} cx={xScale(i)} cy={yScale(point.val)} r="5" fill="var(--primary-glow)" className="cursor-pointer" style={{filter: 'url(#pointGlow)'}} onMouseMove={(e) => handleMouseOver(e, point)} onMouseOut={handleMouseOut}/> ))} </svg> {tooltip.show && ( <div className="fixed px-3 py-1 text-sm bg-slate-900 border border-[var(--border-color)] rounded-md shadow-lg" style={{ top: tooltip.y + 15, left: tooltip.x + 15, pointerEvents: 'none' }}> {tooltip.content} </div> )} </div> ); }; return ( <div className="p-6 space-y-6"> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"> {kpiData.map(kpi => ( <Card key={kpi.title} className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-4"> <div className="flex items-center gap-4"> <div className="p-3 bg-slate-800 rounded-md"><kpi.icon className="w-6 h-6 text-[var(--text-primary)]"/></div> <div> <p className="text-sm text-gray-400">{kpi.title}</p> <p className="text-xl font-bold text-white">{kpi.value}</p> </div> </div> </Card> ))} </div> <div className="grid grid-cols-1 lg:grid-cols-2 gap-6"> <ChartCard title="Faculty Workload (Courses)"> <div className="space-y-2"> {facultyWorkload.map(f => ( <div key={f.label} className="flex items-center"> <span className="text-sm text-gray-300 w-32 truncate">{f.label}</span> <div className="flex-1 bg-slate-700/80 rounded-full h-4"> <div className="bg-gradient-to-r from-[var(--primary-start)] to-[var(--primary-end)] h-4 rounded-full text-right pr-2 text-xs text-white flex items-center justify-end" style={{ width: `${(f.value / 5) * 100}%` }}>{f.value}</div> </div> </div> ))} </div> </ChartCard> <ChartCard title="Attendance Trend (Last Week)"> <LineChart data={attendanceTrend} /> </ChartCard> </div> </div> ) };
        const AttendanceView = () => { const ProgressBar = ({ value }) => ( <div className="w-full bg-slate-700/80 rounded-full h-2.5"> <div className="bg-gradient-to-r from-teal-400 to-[var(--primary-start)] h-2.5 rounded-full" style={{ width: `${value}%` }}></div> </div> ); return ( <div className="p-6"> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6"> <h3 className="text-xl font-bold text-white mb-4">Daily Attendance Records</h3> <div className="space-y-4"> {attendanceData.map(item => { const percentage = ((item.present / item.total) * 100).toFixed(1); return ( <Card key={item.id} className="bg-slate-800/50 border-slate-700/80 p-4"> <div className="grid grid-cols-1 md:grid-cols-4 gap-4 items-center"> <div> <p className="font-semibold text-white">{item.course}</p> <p className="text-sm text-gray-400">{item.faculty}</p> </div> <p className="text-sm text-[var(--text-accent)]">{item.department}</p> <div className="md:col-span-2"> <div className="flex justify-between items-center mb-1 text-sm"> <span className="text-gray-300">{item.present} / {item.total} Present</span> <span className="font-bold text-white">{percentage}%</span> </div> <ProgressBar value={percentage} /> </div> </div> </Card> )})} </div> </Card> </div> ); };
        const SettingsView = ({ theme, setTheme }) => { const [settings, setSettings] = useState({ email: true, sms: false, push: true }); const ToggleSwitch = ({ label, enabled, onChange }) => ( <div className="flex items-center justify-between py-3 border-b border-slate-700/80"> <span className="text-gray-300">{label}</span> <button onClick={onChange} className={`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${enabled ? 'bg-[var(--primary-start)]' : 'bg-slate-600'}`}> <span className={`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${enabled ? 'translate-x-6' : 'translate-x-1'}`} /> </button> </div> ); const themeOptions = [ { name: 'Cyber Teal', value: 'teal' }, { name: 'Quantum Magenta', value: 'magenta' }, { name: 'Solar Flare Orange', value: 'orange' }, ]; return ( <div className="p-6 space-y-6"> <Card className="bg-slate-900/70 backdrop-blur-xl border-[var(--border-color)] p-6 max-w-3xl mx-auto"> <h3 className="text-xl font-bold text-white mb-4">System Settings</h3> <div> <h4 className="font-semibold text-[var(--text-primary)] mt-6 mb-2">Appearance</h4> <div className="flex space-x-4"> {themeOptions.map(opt => ( <button key={opt.value} onClick={() => setTheme(opt.value)} className={`px-4 py-2 rounded-md border-2 transition-all ${theme === opt.value ? 'border-[var(--primary-glow)] shadow-lg shadow-[var(--primary-glow)]/20' : 'border-slate-600 hover:border-slate-500'}`}> {opt.name} </button> ))} </div> </div> <div> <h4 className="font-semibold text-[var(--text-primary)] mt-6 mb-2">Notification Preferences</h4> <ToggleSwitch label="Email Notifications" enabled={settings.email} onChange={() => setSettings(s => ({...s, email: !s.email}))} /> <ToggleSwitch label="SMS Alerts" enabled={settings.sms} onChange={() => setSettings(s => ({...s, sms: !s.sms}))} /> <ToggleSwitch label="Push Notifications" enabled={settings.push} onChange={() => setSettings(s => ({...s, push: !s.push}))} /> </div> <div className="mt-6 text-right"> <Button className="bg-gradient-to-r from-[var(--primary-start)] to-[var(--primary-end)] hover:opacity-90 text-white border-0 shadow-lg shadow-[var(--primary-glow)]/25 font-medium">Save Changes</Button> </div> </Card> <Card className="bg-slate-900/70 backdrop-blur-xl border-red-500/30 p-6 max-w-3xl mx-auto"> <h4 className="font-semibold text-red-400 mb-2 flex items-center gap-2"><AlertTriangle className="w-5 h-5"/> Danger Zone</h4> <p className="text-sm text-gray-400 mb-4">These actions are irreversible. Please proceed with caution.</p> <div className="flex space-x-4"> <Button className="bg-amber-500/10 hover:bg-amber-500/20 text-amber-400 border border-amber-500/30">Reset Timetables</Button> <Button className="bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30">System Reboot</Button> </div> </Card> </div> ); };
        
        function TimetableDashboard() {
            const [selectedDepartment, setSelectedDepartment] = useState(allDepartments[0]);
            const [selectedFaculty, setSelectedFaculty] = useState("All Faculty");
            const [searchQuery, setSearchQuery] = useState("");
            const [activeSection, setActiveSection] = useState("Dashboard");
            const [theme, setTheme] = useState('teal');
            const [userName, setUserName] = useState('');
            const [isDeptDropdownOpen, setDeptDropdownOpen] = useState(false);
            const [isFacultyDropdownOpen, setFacultyDropdownOpen] = useState(false);
            const [isUserDropdownOpen, setUserDropdownOpen] = useState(false);
            const deptDropdownRef = useRef(null);
            const facultyDropdownRef = useRef(null);
            const userDropdownRef = useRef(null);

            useEffect(() => { setUserName(localStorage.getItem('userName') || 'Admin'); }, []);
            useEffect(() => { const root = document.documentElement; if (theme === 'magenta') { root.style.setProperty('--bg-start', '#111827'); root.style.setProperty('--bg-mid', '#4c1d95'); root.style.setProperty('--bg-end', '#5b21b6'); root.style.setProperty('--primary-glow', '#c084fc'); root.style.setProperty('--primary-start', '#a855f7'); root.style.setProperty('--primary-end', '#d946ef'); root.style.setProperty('--border-color', 'rgba(192, 132, 252, 0.2)'); root.style.setProperty('--text-primary', '#c084fc'); root.style.setProperty('--text-accent', '#e9d5ff'); } else if (theme === 'orange') { root.style.setProperty('--bg-start', '#18181b'); root.style.setProperty('--bg-mid', '#78350f'); root.style.setProperty('--bg-end', '#9a3412'); root.style.setProperty('--primary-glow', '#fb923c'); root.style.setProperty('--primary-start', '#f97316'); root.style.setProperty('--primary-end', '#ea580c'); root.style.setProperty('--border-color', 'rgba(251, 146, 60, 0.2)'); root.style.setProperty('--text-primary', '#fb923c'); root.style.setProperty('--text-accent', '#fed7aa'); } else { root.style.setProperty('--bg-start', '#020617'); root.style.setProperty('--bg-mid', '#083344'); root.style.setProperty('--bg-end', '#0c4a6e'); root.style.setProperty('--primary-glow', '#22d3ee'); root.style.setProperty('--primary-start', '#06b6d4'); root.style.setProperty('--primary-end', '#38bdf8'); root.style.setProperty('--border-color', 'rgba(34, 211, 238, 0.2)'); root.style.setProperty('--text-primary', '#22d3ee'); root.style.setProperty('--text-accent', '#67e8f9'); } }, [theme]);
            useEffect(() => { function handleClickOutside(event) { if (deptDropdownRef.current && !deptDropdownRef.current.contains(event.target)) setDeptDropdownOpen(false); if (facultyDropdownRef.current && !facultyDropdownRef.current.contains(event.target)) setFacultyDropdownOpen(false); if (userDropdownRef.current && !userDropdownRef.current.contains(event.target)) setUserDropdownOpen(false); } document.addEventListener("mousedown", handleClickOutside); return () => document.removeEventListener("mousedown", handleClickOutside); }, []);
            useEffect(() => { setSelectedFaculty("All Faculty"); }, [selectedDepartment]);

            const classesForSelectedDept = timetables[selectedDepartment] || [];
            const facultyForSelectedDept = ["All Faculty", ...new Set(classesForSelectedDept.map(c => c.faculty))];
            const filteredClasses = classesForSelectedDept.filter(c => { const facultyMatch = selectedFaculty === "All Faculty" || c.faculty === selectedFaculty; const searchMatch = searchQuery === "" || c.course.toLowerCase().includes(searchQuery.toLowerCase()) || c.faculty.toLowerCase().includes(searchQuery.toLowerCase()) || c.room.toLowerCase().includes(searchQuery.toLowerCase()); return facultyMatch && searchMatch; });
            const navigationItems = [ { icon: BarChart3, label: "Dashboard" }, { icon: Calendar, label: "Timetables" }, { icon: BookOpen, label: "Classrooms" }, { icon: Users, label: "Faculty" }, { icon: BarChart3, label: "Analytics" }, { icon: Bell, label: "Attendance" }, { icon: Settings, label: "Settings" } ];
            
            const handleLogout = () => {
                localStorage.clear();
                const currentUrl = window.location.href;
                const loginUrl = new URL('index.html', currentUrl).href;
                window.location.href = loginUrl;
            };
            
            const renderActiveSection = () => {
                switch(activeSection) {
                    case "Dashboard": return <DashboardView setActiveSection={setActiveSection}/>;
                    case "Timetables": return ( <div className="p-6 space-y-6"> <div className="flex flex-wrap items-center gap-4"> <Button className="bg-gradient-to-r from-[var(--primary-start)] to-[var(--primary-end)] hover:opacity-90 text-white border-0 shadow-lg shadow-[var(--primary-glow)]/25 font-medium flex-shrink-0"> <Sparkles className="w-4 h-4 mr-2" /> Generate AI Timetable </Button> <div className="relative min-w-0 flex-1 max-w-xs"> <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" /> <Input placeholder="Search classes..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className="pl-10 bg-slate-900/50 border-[var(--border-color)] text-white placeholder:text-gray-400 backdrop-blur-sm w-full focus:bg-slate-800/60" /> </div> <div ref={deptDropdownRef}> <DropdownMenu> <DropdownMenuTrigger> <Button onClick={() => setDeptDropdownOpen(!isDeptDropdownOpen)} variant="outline" className="bg-slate-900/50 border-[var(--border-color)] text-gray-200 hover:bg-slate-800/70 hover:border-[var(--primary-glow)]/40 flex-shrink-0"> <Filter className="w-4 h-4 mr-2" /> <span className="hidden sm:inline">{selectedDepartment}</span><span className="sm:hidden">Dept</span> <ChevronDown className="w-4 h-4 ml-2" /> </Button> </DropdownMenuTrigger> {isDeptDropdownOpen && ( <DropdownMenuContent> {allDepartments.map((dept) => ( <DropdownMenuItem key={dept} onClick={() => { setSelectedDepartment(dept); setDeptDropdownOpen(false); }}>{dept}</DropdownMenuItem> ))} </DropdownMenuContent> )} </DropdownMenu> </div> <div ref={facultyDropdownRef}> <DropdownMenu> <DropdownMenuTrigger> <Button onClick={() => setFacultyDropdownOpen(!isFacultyDropdownOpen)} variant="outline" className="bg-slate-900/50 border-[var(--border-color)] text-gray-200 hover:bg-slate-800/70 hover:border-[var(--primary-glow)]/40 flex-shrink-0"> <Users className="w-4 h-4 mr-2" /> <span className="hidden sm:inline">{selectedFaculty}</span><span className="sm:hidden">Faculty</span> <ChevronDown className="w-4 h-4 ml-2" /> </Button> </DropdownMenuTrigger> {isFacultyDropdownOpen && ( <DropdownMenuContent> {facultyForSelectedDept.map((faculty) => ( <DropdownMenuItem key={faculty} onClick={() => { setSelectedFaculty(faculty); setFacultyDropdownOpen(false); }}>{faculty}</DropdownMenuItem> ))} </DropdownMenuContent> )} </DropdownMenu> </div> <Button variant="outline" className="bg-slate-900/50 border-[var(--border-color)] text-gray-200 hover:bg-slate-800/70 hover:border-[var(--primary-glow)]/40 flex-shrink-0"> <Download className="w-4 h-4 mr-2" /> <span className="hidden sm:inline">Export PDF</span><span className="sm:hidden">Export</span> </Button> </div> <TimetableGrid classes={filteredClasses} /> </div> );
                    case "Classrooms": return <ClassroomsView />;
                    case "Faculty": return <FacultyView />;
                    case "Analytics": return <AnalyticsView />;
                    case "Attendance": return <AttendanceView />;
                    case "Settings": return <SettingsView theme={theme} setTheme={setTheme} />;
                    default: return null;
                }
            };

            return ( <div className="min-h-screen text-white animated-gradient"> <div className="relative flex"> <aside className="w-64 h-screen bg-slate-900/50 backdrop-blur-xl border-r border-[var(--border-color)] sticky top-0 flex-shrink-0"> <div className="p-6"> <h1 className="text-xl font-bold text-white mb-2">SmartClass Pro</h1> <span className="text-xs text-[var(--text-primary)]">ADMINISTRATOR_V2.0</span> <nav className="space-y-2 mt-8"> {navigationItems.map(item => ( <button key={item.label} onClick={() => setActiveSection(item.label)} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${ activeSection === item.label ? "bg-[var(--primary-glow)]/10 text-[var(--text-accent)] border border-[var(--border-color)] shadow-[0_0_15px_rgba(34,211,238,0.1)]" : "text-gray-300 hover:bg-[var(--primary-glow)]/10 hover:text-[var(--text-accent)]" }`}> <item.icon className="w-5 h-5" />{item.label} </button> ))} </nav> </div> </aside> <main className="flex-1 min-w-0"> <header className="bg-slate-900/50 backdrop-blur-xl border-b border-[var(--border-color)] p-6 sticky top-0 z-20"> <div className="flex items-center justify-between"> <div> <h2 className="text-2xl font-bold text-white"> {{"Dashboard": "Admin Command Center", "Timetables": "Timetable Management", "Classrooms": "Classroom Management", "Faculty": "Faculty Management", "Analytics": "Analytics Dashboard", "Attendance": "Attendance Tracking", "Settings": "System Settings"}[activeSection]} </h2> <p className="text-gray-400"> { activeSection === 'Dashboard' ? `Welcome back, ${userName}! Here's your college overview.` : `Manage and view the ${activeSection.toLowerCase()}` } </p> </div> <div className="flex items-center gap-4"> <Clock /> <div ref={userDropdownRef}> <DropdownMenu> <DropdownMenuTrigger> <Button onClick={() => setUserDropdownOpen(!isUserDropdownOpen)} variant="outline" className="bg-slate-900/50 border-[var(--border-color)] text-gray-200 hover:bg-slate-800/70 hover:border-[var(--primary-glow)]/40"> <User className="w-4 h-4 mr-2" /> {userName} <ChevronDown className="w-4 h-4 ml-2" /> </Button> </DropdownMenuTrigger> {isUserDropdownOpen && ( <DropdownMenuContent> <DropdownMenuItem onClick={() => setUserDropdownOpen(false)}>Profile</DropdownMenuItem> <DropdownMenuItem onClick={() => setActiveSection('Settings')}>Settings</DropdownMenuItem> <DropdownMenuItem onClick={handleLogout}>Logout</DropdownMenuItem> </DropdownMenuContent> )} </DropdownMenu> </div> </div> </div> </header> {renderActiveSection()} </main> </div> </div> );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<TimetableDashboard />);
    </script>
</body>
</html>