<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smartclass Pro - Student Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./database.js"></script>
    <style>
        body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .animated-gradient { background: linear-gradient(-45deg, #020617, #083344, #020617, #0c4a6e); background-size: 400% 400%; animation: gradient-animation 15s ease infinite; }
        :root { --bg-start: #020617; --bg-mid: #083344; --bg-end: #0c4a6e; --primary-glow: #22d3ee; --primary-start: #06b6d4; --primary-end: #38bdf8; --border-color: rgba(34, 211, 238, 0.2); --text-primary: #22d3ee; --text-accent: #67e8f9; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; z-index: 50; backdrop-filter: blur(5px); transition: opacity 0.3s ease; }
        .modal-content { max-width: 500px; width: 100%; transition: transform 0.3s ease; }
        .loading-spinner { border: 2px solid rgba(255, 255, 255, 0.3); border-top: 2px solid var(--primary-glow); border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <script>
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userRole = localStorage.getItem('userRole');
        const loggedInStudentId = localStorage.getItem('loggedInStudentId');

        if (!isLoggedIn || userRole !== 'student' || !loggedInStudentId) {
            window.location.href = 'index.html';
        }
        
        // FIX: Use 'var' to make studentData globally accessible to other script blocks.
        var studentData = AppDatabase[loggedInStudentId];
        if (!studentData) {
            // Using a simple alert for now, as DOM is not yet ready for a custom modal
            alert('Error: Could not find data for the logged-in student.');
            localStorage.clear();
            window.location.href = 'index.html';
        }
    </script>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        const { profile, timetable, attendance, assignments, grades, announcements } = studentData;
        const timeSlots = ["8:00 AM", "9:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"];
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
        
        // --- Gemini API Call Helper ---
        const callGeminiAPI = async (prompt) => {
            const apiKey = ""; // Canvas will provide the key
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = { contents: [{ parts: [{ text: prompt }] }] };

            let response;
            let retries = 3;
            let delay = 1000;

            while (retries > 0) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        return result.candidates?.[0]?.content?.parts?.[0]?.text || "No response text found.";
                    } else if (response.status === 429) { // Rate limit error
                         await new Promise(resolve => setTimeout(resolve, delay));
                         delay *= 2; // Exponential backoff
                         retries--;
                    } else {
                         throw new Error(`API request failed with status ${response.status}`);
                    }
                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    retries--;
                    if(retries <= 0) return `Error: ${error.message}`;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
             return "Error: The request to the AI service failed after multiple retries.";
        };

        const Card = ({ className, children }) => <div className={`rounded-xl border bg-slate-900/50 backdrop-blur-xl border-[var(--border-color)] ${className}`}>{children}</div>;
        const Button = ({ className, children, ...props }) => <button className={`inline-flex gap-2 items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary-glow)]/50 disabled:pointer-events-none disabled:opacity-50 px-4 py-2 ${className}`} {...props}>{children}</button>;
        const Icon = ({ path, className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path}</svg>);
        const ICONS = {
            Dashboard: <Icon path={<><rect width="7" height="9" x="3" y="3" rx="1" /><rect width="7" height="5" x="14" y="3" rx="1" /><rect width="7" height="9" x="14" y="12" rx="1" /><rect width="7" height="5" x="3" y="16" rx="1" /></>} />,
            Timetable: <Icon path={<><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></>} />,
            Attendance: <Icon path={<><path d="M16 21v-2a4 4_0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></>} />,
            Announcements: <Icon path={<><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></>} />,
            Assignments: <Icon path={<><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M18 13V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5" /><line x1="6" x2="11" y1="10" y2="10" /><line x1="6" x2="8" y1="14" y2="14" /><line x1="6" x2="9" y1="18" y2="18" /></>} />,
            Grades: <Icon path={<><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></>} />,
            Profile: <Icon path={<><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></>} />,
        };

        const StatusBadge = ({ status }) => {
            const baseClasses = "text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full";
            const styles = { Pending: "bg-yellow-900 text-yellow-300", Submitted: "bg-blue-900 text-blue-300", Graded: "bg-green-900 text-green-300" };
            return <span className={`${baseClasses} ${styles[status]}`}>{status}</span>;
        };

        const AssignmentModal = ({ assignment, onClose }) => {
            const [studyPlan, setStudyPlan] = useState("");
            const [isLoadingPlan, setIsLoadingPlan] = useState(false);

            useEffect(() => {
                setStudyPlan("");
                setIsLoadingPlan(false);
            }, [assignment]);

            const handleGenerateStudyPlan = async () => {
                setIsLoadingPlan(true);
                const prompt = `Create a simple, actionable study plan for a college student to complete an assignment. The assignment is "${assignment.title}" for the course "${studentData.courses[assignment.courseId]}". The due date is ${assignment.dueDate}. Break it down into 3-4 clear steps with suggested timelines. Format it as a list.`;
                const generatedPlan = await callGeminiAPI(prompt);
                setStudyPlan(generatedPlan);
                setIsLoadingPlan(false);
            };

            if (!assignment) return null;
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <Card className="p-6">
                            <div className="flex justify-between items-start">
                                <div>
                                    <h3 className="text-xl font-bold text-white">{assignment.title}</h3>
                                    <p className="text-sm text-gray-400 mb-2">{studentData.courses[assignment.courseId]}</p>
                                    <StatusBadge status={assignment.status} />
                                </div>
                                <Button onClick={onClose} className="p-1 h-8 w-8 bg-transparent hover:bg-slate-800/70 text-2xl text-gray-400">&times;</Button>
                            </div>
                            <hr className="my-4 border-slate-700" />
                            <div className="space-y-4 text-gray-300">
                                <p><strong className="text-white">Due Date:</strong> {assignment.dueDate}</p>
                                {assignment.grade && <p><strong className="text-white">Grade:</strong> <span className="text-lg font-bold text-[var(--text-accent)]">{assignment.grade}</span></p>}
                                <p><strong className="text-white">Details:</strong></p>
                                <p className="bg-slate-800/50 p-3 rounded-md border border-slate-700/80">{assignment.details}</p>
                            </div>
                            
                            <div className="mt-6 border-t border-slate-700 pt-4">
                                <Button onClick={handleGenerateStudyPlan} disabled={isLoadingPlan} className="w-full bg-cyan-600/20 border border-cyan-500/30 text-cyan-300 hover:bg-cyan-600/40">
                                    {isLoadingPlan ? <><div className="loading-spinner"></div> Generating...</> : "✨ Generate Study Plan"}
                                </Button>
                                {studyPlan && (
                                    <div className="mt-4 p-3 bg-slate-800/70 rounded-md border border-slate-700">
                                        <h4 className="font-bold text-white mb-2">Your AI Study Plan:</h4>
                                        <div className="text-sm text-gray-300 whitespace-pre-wrap" dangerouslySetInnerHTML={{ __html: studyPlan.replace(/\*/g, '•') }}></div>
                                    </div>
                                )}
                            </div>

                            <div className="mt-6 flex justify-end"> <Button className="bg-[var(--primary-start)] hover:bg-[var(--primary-end)] text-white">Submit Work</Button> </div>
                        </Card>
                    </div>
                </div>
            );
        };

        const AnnouncementCard = ({ item }) => {
            const [summary, setSummary] = useState("");
            const [isLoadingSummary, setIsLoadingSummary] = useState(false);

            const handleSummarize = async () => {
                setIsLoadingSummary(true);
                const prompt = `Summarize the following announcement into one concise sentence: "${item.content}"`;
                const result = await callGeminiAPI(prompt);
                setSummary(result);
                setIsLoadingSummary(false);
            };

            return (
                 <Card className="p-4 bg-slate-800/50 border-slate-700/80">
                    <p className="font-bold text-white">{item.title}</p>
                    <p className="text-xs text-gray-400 mb-2">{item.date}</p>
                    <p className="text-sm text-gray-300">{item.content}</p>
                    <div className="mt-3 border-t border-slate-700/50 pt-3 flex flex-col items-start">
                        <Button onClick={handleSummarize} disabled={isLoadingSummary} className="bg-transparent border border-cyan-500/20 text-cyan-400 text-xs py-1 px-2 hover:bg-cyan-500/10">
                            {isLoadingSummary ? <><div className="loading-spinner"></div> Summarizing...</> : "✨ Summarize"}
                        </Button>
                        {summary && <p className="text-xs italic text-cyan-200 mt-2 bg-cyan-900/30 p-2 rounded-md"><strong>Summary:</strong> {summary}</p>}
                    </div>
                </Card>
            );
        };


        function StudentDashboard() {
            const [activeSection, setActiveSection] = useState("Dashboard");
            const [selectedAssignment, setSelectedAssignment] = useState(null);
            const [dailyTip, setDailyTip] = useState("");
            const [isLoadingTip, setIsLoadingTip] = useState(false);
            
            const handleLogout = () => {
                localStorage.clear();
                // FIX: Use a simple relative path for redirection.
                window.location.href = 'index.html';
            };

            const handleGetStudyTip = useCallback(async () => {
                setIsLoadingTip(true);
                const today = new Date().getDay() - 1;
                const todaysClasses = timetable.filter(c => c.day === today).map(c => c.course);
                if (todaysClasses.length === 0) {
                    setDailyTip("You have no classes today! It's a great day to review past topics or get ahead on assignments.");
                    setIsLoadingTip(false);
                    return;
                }
                const prompt = `I am a college student and my classes for today are: ${todaysClasses.join(', ')}. Give me one single, actionable, and encouraging study tip for the day related to these subjects. Keep it under 30 words.`;
                const tip = await callGeminiAPI(prompt);
                setDailyTip(tip);
                setIsLoadingTip(false);
            }, [timetable]);

            const navigationItems = [
                { icon: "Dashboard", label: "Dashboard" }, { icon: "Timetable", label: "My Timetable" },
                { icon: "Attendance", label: "My Attendance" }, { icon: "Assignments", label: "Assignments" },
                { icon: "Grades", label: "Grades" }, { icon: "Announcements", label: "Announcements" },
                { icon: "Profile", label: "My Profile" },
            ];
            
            const renderActiveSection = () => {
                switch(activeSection) {
                    case "Dashboard":
                        const today = new Date().getDay() - 1;
                        const todaysClasses = timetable.filter(c => c.day === today).sort((a,b) => a.time - b.time);
                        const upcomingAssignments = assignments.filter(a => new Date(a.dueDate) >= new Date()).sort((a,b) => new Date(a.dueDate) - new Date(b.dueDate));
                        return (
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div className="lg:col-span-2 space-y-6">
                                     <Card className="p-6">
                                        <div className="flex justify-between items-start mb-4">
                                            <h3 className="text-xl font-bold text-white">Today's Study Tip ✨</h3>
                                             <Button onClick={handleGetStudyTip} disabled={isLoadingTip} className="bg-transparent border border-cyan-500/20 text-cyan-400 text-xs py-1 px-2 hover:bg-cyan-500/10 -mt-1">
                                                {isLoadingTip ? 'Getting Tip...' : 'Get Today\'s Study Tip'}
                                             </Button>
                                        </div>
                                        {isLoadingTip && <div className="flex items-center gap-2 text-gray-400"><div className="loading-spinner"></div><span>Generating your personalized tip...</span></div>}
                                        {dailyTip && <p className="text-cyan-200 bg-cyan-900/30 p-3 rounded-md">{dailyTip}</p>}
                                    </Card>

                                    <Card className="p-6">
                                        <h3 className="text-xl font-bold text-white mb-4">Today's Schedule</h3>
                                        {todaysClasses.length > 0 ? (
                                            <div className="space-y-3"> {todaysClasses.map(c => ( <div key={c.id} className="bg-slate-800/50 border border-slate-700/80 p-3 rounded-lg flex justify-between items-center"><div><p className="font-semibold text-white">{c.course}</p><p className="text-sm text-gray-400">{c.faculty} &middot; Room {c.room}</p></div><p className="text-lg font-mono text-[var(--text-accent)]">{timeSlots[c.time]}</p></div> ))} </div>
                                        ) : <p className="text-gray-400">No classes scheduled for today.</p>}
                                    </Card>
                                    <Card className="p-6">
                                         <h3 className="text-xl font-bold text-white mb-4">Upcoming Assignments</h3>
                                         {upcomingAssignments.length > 0 ? (
                                            <div className="space-y-3"> {upcomingAssignments.slice(0, 3).map(a => ( <div key={a.id} className="bg-slate-800/50 border border-slate-700/80 p-3 rounded-lg flex justify-between items-center hover:border-[var(--primary-glow)]/50 transition-colors cursor-pointer" onClick={() => setSelectedAssignment(a)}><div><p className="font-semibold text-white">{a.title}</p><p className="text-sm text-gray-400">{studentData.courses[a.courseId]}</p></div><p className="text-sm text-amber-400">Due: {a.dueDate}</p></div>))}</div>
                                         ) : <p className="text-gray-400">No upcoming assignments.</p>}
                                    </Card>
                                </div>
                                <div className="lg:col-span-1 space-y-6">
                                    <Card className="p-6">
                                         <h3 className="text-xl font-bold text-white mb-4">Quick Attendance</h3>
                                         <div className="space-y-3">{attendance.slice(0,3).map(att=>(<div key={att.course}><div className="flex justify-between mb-1"><span className="text-sm font-medium text-gray-300">{att.course}</span><span className={`text-sm font-medium ${att.percentage >= 85 ? 'text-green-400' : 'text-amber-400'}`}>{att.percentage}%</span></div><div className="w-full bg-slate-700 rounded-full h-2.5"><div className={`${att.percentage >= 85 ? 'bg-green-500' : 'bg-amber-500'}`} style={{width: `${att.percentage}%`, height: '100%', borderRadius: '9999px'}}></div></div></div>))}</div>
                                    </Card>
                                    <Card className="p-6">
                                         <h3 className="text-xl font-bold text-white mb-4">Recent Announcements</h3>
                                         <div className="space-y-4">{announcements.slice(0, 2).map(item => ( <div key={item.id} className="border-l-2 border-[var(--primary-glow)]/50 pl-3"><p className="font-bold text-white text-sm">{item.title}</p><p className="text-xs text-gray-400 mb-1">{item.date}</p><p className="text-sm text-gray-300 leading-tight">{item.content.substring(0, 80)}...</p></div>))}</div>
                                    </Card>
                                </div>
                            </div>
                        );
                    case "My Timetable": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">Weekly Schedule</h3><div className="overflow-x-auto"><div style={{minWidth: "900px"}}><div className="grid grid-cols-6 gap-2 mb-4"><div className="p-3 text-center font-semibold text-gray-400">Time</div>{days.map(day=>(<div key={day} className="p-3 text-center font-semibold text-white bg-slate-800/80 border border-slate-700/80 rounded-lg">{day}</div>))}</div><div className="space-y-2">{timeSlots.map((time, timeIndex)=>(<div key={time} className="grid grid-cols-6 gap-2"><div className="p-3 text-center text-sm text-gray-300 bg-slate-900/50 rounded-lg border border-slate-700/60 flex items-center justify-center">{time}</div>{days.map((day, dayIndex)=>{const c=timetable.find(cls=>cls.day===dayIndex&&cls.time===timeIndex);return(<div key={`${day}-${time}`} className={`p-2 min-h-[80px] rounded-lg border ${c?'bg-[var(--primary-glow)]/10 border-[var(--primary-glow)]/30':'border-slate-700/80'}`}>{c&&(<div className="text-xs space-y-1"><div className="font-semibold text-white text-balance">{c.course}</div><div className="text-gray-300 truncate">{c.faculty}</div><div className="text-gray-400 truncate">{c.room}</div></div>)}</div>);})}</div>))}</div></div></div></Card>);
                    case "My Attendance": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">Attendance Summary</h3><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">{attendance.map(att=>(<Card key={att.course} className="p-4 flex flex-col items-center justify-center text-center bg-slate-800/50 border-slate-700/80"><div className={`text-4xl font-bold ${att.percentage >= 85 ? 'text-green-400' : 'text-amber-400'}`}>{att.percentage}%</div><p className="text-white mt-2">{att.course}</p></Card>))}</div></Card>);
                    case "Assignments": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">All Assignments</h3><div className="space-y-3">{assignments.map(a=>(<div key={a.id} className="bg-slate-800/50 border border-slate-700/80 p-4 rounded-lg flex flex-col sm:flex-row sm:items-center sm:justify-between hover:border-[var(--primary-glow)]/50 transition-colors cursor-pointer" onClick={()=>setSelectedAssignment(a)}><div className="mb-2 sm:mb-0"><p className="font-semibold text-white">{a.title}</p><p className="text-sm text-gray-400">{studentData.courses[a.courseId]}</p></div><div className="flex items-center justify-between sm:justify-end"><StatusBadge status={a.status}/><p className="text-sm text-amber-300">Due: {a.dueDate}</p></div></div>))}</div></Card>);
                    case "Grades": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">Academic Grades</h3><div className="overflow-x-auto"><table className="w-full text-left"><thead><tr className="border-b border-slate-700 text-sm text-gray-400"><th className="p-3">Course</th><th className="p-3 text-center">Mid-Term</th><th className="p-3 text-center">Assignments</th><th className="p-3 text-center">Final Exam</th><th className="p-3 text-center">Overall</th></tr></thead><tbody>{grades.map(g=>(<tr key={g.courseId} className="border-b border-slate-800"><td className="p-3 font-semibold text-white">{g.courseName}</td><td className="p-3 text-center text-gray-300">{g.midTerm}%</td><td className="p-3 text-center text-gray-300">{g.assignments}%</td><td className="p-3 text-center text-gray-300">{g.final?`${g.final}%`:'N/A'}</td><td className="p-3 text-center font-bold text-lg text-[var(--text-accent)]">{g.overall?`${g.overall}%`:'-'}</td></tr>))}</tbody></table></div></Card>);
                    case "Announcements": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">All Announcements</h3><div className="space-y-4">{announcements.map(item=>(<AnnouncementCard key={item.id} item={item} />))}</div></Card>);
                    case "My Profile": return (<Card className="p-6"><h3 className="text-xl font-bold text-white mb-4">Student Profile</h3><div className="flex flex-col sm:flex-row items-center sm:items-start gap-6"><img src={profile.avatar} alt="Profile" className="w-24 h-24 rounded-full border-2 border-[var(--primary-glow)]/50"/><div className="flex-1 space-y-3 text-center sm:text-left"><p><strong className="text-gray-400 w-28 inline-block">Name:</strong> <span className="text-white">{profile.name}</span></p><p><strong className="text-gray-400 w-28 inline-block">Student ID:</strong> <span className="text-white">{profile.id}</span></p><p><strong className="text-gray-400 w-28 inline-block">Department:</strong> <span className="text-white">{profile.department}</span></p><p><strong className="text-gray-400 w-28 inline-block">Email:</strong> <span className="text-white">{profile.email}</span></p><p><strong className="text-gray-400 w-28 inline-block">Phone:</strong> <span className="text-white">{profile.phone}</span></p></div></div></Card>);
                    default: return null;
                }
            };

            return (
                <>
                    <AssignmentModal assignment={selectedAssignment} onClose={() => setSelectedAssignment(null)} />
                    <div className="min-h-screen text-white animated-gradient">
                        <div className="relative flex">
                             <aside className="w-64 h-screen bg-slate-900/50 backdrop-blur-xl border-r border-[var(--border-color)] sticky top-0 flex-shrink-0 hidden md:flex md:flex-col">
                                <div className="p-6">
                                    <h1 className="text-xl font-bold text-white mb-2">SmartClass Pro</h1>
                                    <span className="text-xs text-[var(--text-primary)]">STUDENT PORTAL</span>
                                    <nav className="space-y-2 mt-8"> {navigationItems.map(item => ( <button key={item.label} onClick={() => setActiveSection(item.label)} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${ activeSection === item.label ? "bg-[var(--primary-glow)]/10 text-[var(--text-accent)] border border-[var(--border-color)]" : "text-gray-300 hover:bg-[var(--primary-glow)]/10" }`}> <div className="w-5 h-5">{ICONS[item.icon]}</div>{item.label} </button> ))} </nav>
                                </div>
                                <div className="mt-auto p-6 border-t border-[var(--border-color)]">
                                    <div className="flex items-center gap-3">
                                        <img src={profile.avatar} alt="Profile" className="w-10 h-10 rounded-full" />
                                        <div>
                                            <p className="font-semibold text-white text-sm">{profile.name}</p>
                                            <p className="text-xs text-gray-400">{profile.id}</p>
                                        </div>
                                    </div>
                                </div>
                             </aside>
                             <main className="flex-1 min-w-0">
                                <header className="bg-slate-900/50 backdrop-blur-xl border-b border-[var(--border-color)] p-6 sticky top-0 z-20">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <h2 className="text-2xl font-bold text-white">{activeSection}</h2>
                                            <p className="text-gray-400">Welcome back, {profile.name.split(' ')[0]}!</p>
                                        </div>
                                        <Button onClick={handleLogout} className="bg-slate-900/50 border-[var(--border-color)] text-gray-200 hover:bg-slate-800/70">Logout</Button>
                                    </div>
                                </header>
                                <div className="p-6">{renderActiveSection()}</div>
                             </main>
                        </div>
                    </div>
                </>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<StudentDashboard />);
    </script>
</body>
</html>